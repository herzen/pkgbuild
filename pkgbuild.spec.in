# The default install prefix is /opt/pkgbuild
# Use pkgbuild --define 'pkgbuild_prefix /path/to/dir'
# to define a different one.

%{?!pkgbuild_prefix:%define pkgbuild_prefix /opt/pkgbuild}
%define _prefix %{pkgbuild_prefix}

Name:         pkgbuild
License:      GPL
Group:        Development/Tools/Other
URL:	      http://pkgbuild.sourceforge.net/
Version:      @PKGBUILD_VERSION@
Release:      1
BuildArch:    noarch
Vendor:	      Sun Microsystems, Inc.
Summary:      pkgbuild - rpmbuild-like tool for building Solaris packages
Source:       pkgbuild-%{version}.tar.bz2
BuildRoot:    %{_tmppath}/%{name}-%{version}-build

%{?_pkgbuild:SUNW_Pkg:                  SFpkgbuild}
%{?_pkgbuild:SUNW_MaxInst:              1000}
%{?_pkgbuild:SUNW_BaseDir:              %{pkgbuild_prefix}}

%ifos Solaris
Requires:     SUNWbash
Requires:     SUNWperl584core
Requires:     SUNWgpch
%else
Requires:     perl >= 5.0.0
Requires:     patch
%endif

%description
A tool for building Solaris SVr4 packages based on RPM spec files.
Most features and some extensions of the spec format are implemented.

%prep
%setup -q -n pkgbuild-%version

%build
./configure --prefix=%{pkgbuild_prefix}
make

%install
make DESTDIR=$RPM_BUILD_ROOT install

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr (-, root, bin)
%doc COPYING AUTHORS NEWS
%attr (0755, root, bin) %{_bindir}
%attr (0755, root, bin) %{_libdir}

%changelog
* Fri Aug 11 2006 - <laca@sun.com>
- delete topdir stuff, we have per-user topdirs now
* Mon Aug 08 2005 - <laca@sun.com>
- add GNU Patch dependency
* Thu Dec 09 2004 - <laca@sun.com>
- Remove %topdir/* from the pkgmap and create these directories in %post
* Fri Mar 05 2004 - <laca@sun.com>
- fix %files
* Wed Jan 07 2004 - <laszlo.peter@sun.com>
- initial version of the spec file
