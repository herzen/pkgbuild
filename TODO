Things broken by IPS support:
 - Requires: /path/to/file (this currently parses /var/sadm/install/contents,
   need to use pkg search)
 - uninstall-pkgs should detect if the pkg was installed with pkgadd or pkg
 - install-pkgs and build should detect if the default pkging system is
   svr4 or ips and install using that format (unless --ips or --svr4 is
   used to force one or the other)

Additional stuff needed for full IPS support:
 - need to define and implement additional spec file elements for
   attributes and tags, e.g.
   %tag (foo) in %files and
   Attribute(name): value
 - possibly merge subpackages and tag them based on their name, e.g.
   devel, root, data for SFEfoo-devel, SFEfoo-root, SFEfoo-data
 - implement publish subcommand that:
   - rebuilds the manifest (because it's possible that the package was
     previously built as svr4 only)
   - publishes to the repository determined by PKG_REPO
[- include sources in the binary packages, tagged as sources and not
   installed by default, to allow automatic rebuilds; filters and
   filter operations need to be implemented in IPS for this ]

Some things I'm planning fix/add:
 - bcond_with (http://www.redhat.com/archives/epel-devel-list/2007-July/msg00208.html)
 - S8/S9 compatibility
 - %check scriptlet: http://rpm.org/max-rpm-snapshot/s1-rpm-inside-scripts.html#S3-RPM-INSIDE-CHECK-SCRIPT
 - pkgbuild -ta
 - pkgtool parallel build
 - support all rpm 4 spec file elements (need to figure out what's missing)
 - fix/implement version checking (currently dependencies check pkg names only)
 - add support for SVr4 "space files", see space(4) on Solaris
 - on Linux, generate plain rpm spec files and call rpmbuild to do the build
 - rpmrc support: http://rpm.org/max-rpm-snapshot/ch-rpmrc-file.html
 - macros: http://www.rpm.org/rpmapi-4.1/macros.html
 - automatic regression tests
 - implement autoreqprov
 - %define _use_internal_dependency_generator 0
 - %define __find_requires foo   <--- redefine dependency generator script
 - implement RequireArch / RequireOS
 - rpm seems to accept %Package, check if all directives are indeed
   case insensitive and implement accordingly
 - %if foo == bar
 - version checking in requires/buildrequires
 - requires(pre|post|preun|postun)
 - spec file lint
 - rpm compat: only Name, Version and Release define %name, %version, %release
   other Tags do not define macros (grrr....)
 - %exclude modifier in %files

Longer term plans:
 - commit triggered build system
 - build dep tree and install dep tree visualization
 - build debugging (step-by-step interactive building)
