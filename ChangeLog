2008-08-12  Glynn Foster  <glynn.foster@sun.com>

	* pkgbuild.pl.in: Use :: instead of : in info.classification.

2008-08-12  Glynn Foster  <glynn.foster@sun.com>

	* m4/perl.m4: aclocal doesn't seem to like comments at the end
	of the m4 file. Remove.
	* pkgbuild.pl.in: Add short comment about repository.

2008-08-13  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: add --notify/--nonotify options; use notify-send
	  to tell the user when a spec file is done.
	* configure.in: bump version to 1.3.90 in preparation for
	  1.4.0

2008-08-12  Glynn Foster  <glynn.foster@sun.com>

	* pkgbuild.pl.in, pkgtool.pl: Ensure that we now build IPS and
	SVr4 packages by default, and utilize the SVr4 infrastructure
	in preparing the IPS package to be published to the repository.
	Add some additional meta-data to the IPS publishing stage.

2008-08-06  Petr Sobotka  <sobotkap@gmail.com>

	* pkgbuild.pl.in: Commit patches send by Glynn Foster - wrong
	metadata variable names

2008-07-12  Petr Sobotka  <sobotkap@gmail.com>

	* pkgbuild.pl.in: Add creating IPS publish script
	when running with --ips
	* pkgtool.pl: Passing new ips arguments to pkgbuild. 
	Installing IPS package is commented as IPS bug #2253 blocks it.

2008-06-19  Laszlo Peter  <laca@sun.com>

	* config.pm: set undefined settings to '' to avoid perl errors
	  (error reported by Andras Barna)
	* pkgdbgrep.c: (read_contents): unC99ify
	* pkgtool.pl: clarify an error message

2008-03-26  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: add --version command line option
	* rpm_spec.pm.in: add get_version function

2008-03-26  Laszlo Peter  <laca@sun.com>

	* configure.in: post release version bump.
	* pkgtool.pl: create the download directory if it doesn't exist.
	  Reported by Michal Bielicki.

	======= pkgbuild 1.3.0 =======

2008-03-12  Laszlo Peter  <laca@sun.com>

	* pkgbuild.pl.in: run the %check block after %install
	* rpm_spec.pm.in: implement support for the %check scriptlet
	* NEWS: update

2008-03-05  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: generate xhtml build reports, patch from
	  Damien Carbery.

2008-02-16  Laszlo Peter  <laca@sun.com>

	* Makefile.am: add pkgdb.pm and pkgdbgrep.c
	* NEWS: update
	* TODO: delete completed items
	* configure.in: bump version to 1.3.0, add AM_PROG_CC_C_O for
	  pkgdbgrep
	* pkgbuild.pl.in: fix bugs 1707525 Add requires: /path/to/file,
	  1705877 defattr takes an optional 4th arg in rpmbuild.
	  fix bug where { and } are eaten by glob even if the file
	  exists and includes { and }
	* pkgdb.pm.in: (new) perl module that finds the package name
	  for a file name.  Based on code by Mike Bristow.
	* pkgdbgrep.c: C program that quickly finds files in the Solaris
	  contents file.  This is used instead of grep so that regexps
	  don't need to be escaped.
	* pkgtool.pl: try to find spec files with .spec appended if not
	  found without the .spec
	* rpm_file.pm: add defattributes arg
	* rpm_package.pm: add dirmode as an optional attribute
	* rpm_spec.pm.in: handle the optional dirmode attribute in
	  %attr and %defattr evalutate the arguments of %files -f

2008-02-02  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: implement --autodeps; adds spec files to the build
	  automatically to satisfy missing dependencies.
	* pkgbuild.pl.in: add --with-foo / --without-foo to usage ()

2008-01-20  Laszlo Peter  <laca@sun.com>

	* rpm_spec.pm.in: use /usr/bin/uncompress for tar.Z tarballs
	* macros.in: define macros for uncompress, although they
	  are not currently used.  Patch from Thomas Wagner.

2008-01-06  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: download tarballs under a temporary name first,
	  then rename it to the real file name if the download is
	  successful.  Fixes 1767423.

2008-01-06  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: add --tries=1 to wget options, fixes 1812491.
	  Fix by Ananth Shrinivas S.

2008-01-06  Laszlo Peter  <laca@sun.com>

	* pkgbuild.pl.in: quote some strings in regexps to avoid perl
	  runtime errors, fixes 1786439 (patch from Anonymous submitter)
	* NEWS: update

2008-01-06  Laszlo Peter  <laca@sun.com>

	* TODO: updated
	* config.pm: (readrc) add optional arg ignore_unknown: makes
	  it silently ignore all settings in the rc file that is not
	  defined.
	* pkgtool.pl: do not send build failure emails for DEP_FAILED
	  specs, plus some cosmetic changes
	* rpm_spec.pm.in: define %error and %warning macros

2007-04-27  Laszlo Peter  <laca@sun.com>

	* rpm_spec.pm.in: expand macros in the filename argument of
	  %files -f filename.  Patch by Mike Bristow, fixes bug 1708029.

2007-04-27  Laszlo Peter  <laca@sun.com>

	* configure.in: fix detecting GNU tar to work with gtar >= 1.15.1.
	  Patch from Mike Bristow.  Fixes bug 1706401.

2007-04-27  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: delete warning message when a non-tarball is found
	  in the tarball dir and not in the source dir.

2007-04-02  Laszlo Peter  <laca@sun.com>

	* configure.in: post-release version bump

	======== pkgbuild version 1.2.0 ========

2007-03-29  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: fix warning when source_mirror is not set

2007-03-29  Laszlo Peter  <laca@sun.com>

	* rpm_spec.pm.in: fix find_package_by_name to check both Name
	  and SUNW_Pkg.
	* configure.in: bump version to 1.2.0 since there are new
	  features not just bug fixes.

2007-03-26  Laszlo Peter  <laca@sun.com>

	* pkgbuild.pl.in:
	  - fix bug where pkgtool build-only missed dependencies on
	    non-installed packages as reported by Eric Boutilier.
	  - implement hard links
	* pkgtool.pl:
	  - fix bug where pkgtool build-only was looking for both
	    the BuildRequires and the Requires dependencies.
	    build-install must look for both kinds, but build-only
	    should only check BuildRequires dependencies.  Reported
	    by Paul Cunningham.
	  - count DEP_FAILED packages as failed in the return value
	  - create a .pkgnames file in %_topdir for pkgbuild to pick
	    up package descriptions from
	* rpm_file.pm: implement hard links
	* rpm_spec.pm.in: implement hard links (%hard modified in
	    %files)

2007-03-10  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: ignore duplicates if a spec file is listed mutliple
	  times on the command line

2007-03-08  Laszlo Peter  <laca@sun.com>

	* rpm_spec.pm.in: fix 1661513 Unitialized value warning in
	  find_package_by_name function; based on Damien's patch.

2007-03-08  Laszlo Peter  <laca@sun.com>

	* configure.in: bump to 1.1.2
	* pkgtool.in: use @PERL@ instead of "perl" found in the PATH
	* pkgtool.pl: add new config setting: source_mirrors -- list
	  of tarball mirror sites to try if the original source in
	  unavailable.  Fix handling datastream packages.
	* rpm_package.pm: return SUNW_pkg as the string value of a
	  package, if defined.
	* rpm_spec.pm.in: fixes for datastream packages
	* spectool.pl: add source_mirrors setting for symmetry;
	  add pkgformat options and fix handling datastream pkgs.

	======== pkgbuild version 1.1.1 ========

2006-09-28  Laszlo Peter  <laca@sun.com>

	* rpm_spec.pm.in: attempt to find the real home directory of the
	  user so that the correct rc files are used
	* pkgtool.pl: same again
	* spectool.pl: same again

2006-09-26  Laszlo Peter  <laca@sun.com>

	* NEWS: update
	* config.pm: fix bug introduced in 1.1.0 where %{_topdir} is not
	  expanded in configuration settings like download_to
	* configure.in: bump version number
	* pkgtool.pl: define %{topdir} 
	* rpm_spec.pm.in: make %patch use %_patch_options

	======== pkgbuild version 1.1.0 ========

2006-08-24  Laszlo Peter  <laca@sun.com>

	* macros.in: define _pkgmapdir, for completeness
	* pkgbuild.pl.in: use _pkgmapdir for finding the copyright, depend,
	  proto, etc directories; use _pkgdir to find PKGS, _srcpkgdir
	  to find SPKGS; create the subdirectories under %_topdir as needed
	* rpm_spec.pm.in: define defaults for __pkgbuild_libdir, 
	  _pkgdir, _srcpkgdir, _pkgmapdir

2006-08-22  Laszlo Peter  <laca@sun.com>

	* .cvsignore: add macros
	* Makefile.am: add macros, macros.in
	* NEWS: update; add info about .pkgbuildmacros
	* config.pm: avoid infinite loop if % appears in a setting
	* configure.in: add macros to AC_OUTPUT and define ARCH
	* macros.in: (new) default macro definitions
	* pkgbuild.pl.in: s/i585/i586/
	* pkgtool.pl: remove topdir config option; use .pkgbuildmacros
	  instead; use /bin/profile instead of just profile to avoid
	  picking up /usr/sfw/bin/profile; s/i585/i586/
	* rpm_spec.pm.in: read default macros from LIBDIR/macros and
	  $HOME/.pkgbuildmacros; s/i585/i586/
	* spectool.in: pass in the full path to pkgbuild on the command
	  line
	* spectool.pl: call pkgbuild with the full path; remove topdir
	  config parameter

2006-08-17  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: uninstall all instances of packages when running
	  uninstall-pkgs; add $topdir to the --define options passed to
	  pkgbuild if topdir is non-default
	* rpm_spec.pm.in: make the default _tmppath per-user:
	  /var/tmp/pkgbuild-$USER

2006-08-16  Laszlo Peter  <laca@sun.com>

	* pkgbuild.spec.in: fix dependencies
	* pkgtool.pl: fix typo that breaks downloads

2006-08-16  Laszlo Peter  <laca@sun.com>

	* NEWS: updated for 1.1.0
	* TODO: updated
	* config.pm: add lots of comments; enhance to allow adding
	  to existing values, see NEWS for more details
	* configure.in: bump to 1.1.0; set the default prefix to
	  /opt/pkgbuild; use AC_PROG_PERL instead of pipes and greps;
	  remove the --with-topdir and --enable-sticky-dirs options;
	  add spectool and m4/Makefile
	* get_rpm_topdir: update to work without %_topdir existing
	* m4/Makefile.am: (new): add perl.m4 to EXTRA_DIST
	* m4/perl.m4: (new): AC_PROG_PERL macro
	* pkgbuild.pl.in: 
	  - use standard perl functions instead of system() calls for
	    lots of stuff, thanks to Damien for his advice;
	  - add support for SUNW_PKG_ALLZONES, SUNW_PKG_THISZONE,
	    SUNW_PKG_HOLLOW pkginfo fields, required for zones support; 
	  - when creating depend files, read the pkg name from the
	    pkgnames file instead if the pkg is not installed
	  - report a warning if %files contains absolute symlinks
	    and report and error if an absolute symlink points to
	    $RPM_BUILD_ROOT
	  - normalise file names in %files lists to avoid incorrectly
	    reporting unpackaged files, fixes #1490310
	* pkgbuild.spec.in: update the default prefix to /opt/pkgbuild;
	  remove the --with-topdir and --enable-sticky-dirs options;
	  remove the %post and %postun scripts
	* pkgnames: (new): Solaris pkg abbrevs and names, to be used
	  in depend files in case the pkg isn't installed
	* pkgtool.in: don't look for pkgbuild in the PATH, but use
	  the one in the configured prefix; don't let the user run
	  pkgtool as root on Solaris; don't check for Software Installation
	  profile either, it's done within pkgtool.pl now
	* pkgtool.pl:
	  - use standard perl functions instead of system() calls or
	    regex operations for lots of stuff, thanks to Damien for
	    his advice;
	  - define the topdir rc file setting
	  - make the other dirs like sourcedirs, tarballdirs, specdirs
	    use the value of topdir in their default values;
	  - check if the user has the Software Installation profile
	    and print an error message if they try to install/uninstall
	    packages but they don't have the profile;
	  - automatically create the directories under %_topdir as needed;
	  - implement install-pkgs
	* rpm_spec.pm.in: 
	  - add lots of comments
	  - make _default_topdir default to $HOME/packages
	  - fix bug where %ifnarch and %ifnos nested within other
	    %if conditionals cause parsing problems
	  - add support for SUNW_PKG_ALLZONES, SUNW_PKG_THISZONE,
	    SUNW_PKG_HOLLOW pkginfo fields, required for zones support; 
	  - make all %foo directives case insensitive
	* spectool.in: (new) wrapper script that calls spectool.pl
	* spectool.pl: (new) script for extracting info from spec files
	  see spectool --help for more details
	* Makefile.am: add m4 subdir; don't create topdir on install

2006-06-16  Laszlo Peter  <laca@sun.com>

	* config.pm: tracker ID 1409033: applied patch from Damien Carbery
	  for wrapping long lines in --dumprc

2005-12-03  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: speed up dependency checking by using pkgparam
	  instead of grepping from pkginfo -l
	
	* rpm_spec.pm.in: add a new macro called
	  _invalid_patches_terminate_build: if set to 0 (default is 1),
	  patches that don't apply are ignored (warning printed).  Makes it
	  easier to build from CVS snapshots; fix %{!? to be the same as
	  %{?!, implement more thorough syntax checking in %{? type conditional
	  expressions

2005-10-22  Laszlo Peter  <laca@sun.com>

	* autogen.sh: fix automake/autoconf order
	* configure.in: set version 1.0.1
	* pkgtool.pl: fix --with-foo and --without-foo processing to be
	  the same as in pkgbuild; add the build command to the log.

2005-10-20  Laszlo Peter  <laca@sun.com>

	* pkgbuild.pl.in: use the SUNW_Desc tag for the DESC in pkginfo
	  if defined, otherwise use Summary; define the SUNW_PkgType
	  tag for overriding the default usr/root values; use the
	  SUNW_Rev tag to completely replace the REV part of the version,
	  i.e. do not append the date after it.  Note: this is an
	  incompatible change!  Existing uses of SUNW_Rev need to
	  append .%(date +%Y.%m.%d.%H.%M.%S)

	* rpm_spec.pm.in: add SUNW_PkgType to list of valid tags

	Patch from Simford.Dong@Sun.Com.

2005-10-10  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: fix bug where class action scripts are not
	  copied in SOURCES

2005-09-29  Laszlo Peter  <laca@sun.com>

	* pkgtool.pl: make some log messages clearer

2005-09-25  Laszlo Peter  <laca@sun.com>

	* configure.in: version 1.0.0
	* pkgbuild.pl.in: implement %ghost files.
	  In pkgbuild's implementation:
	   - %ghost files are volatile ('v' file type in the prototype)
	   - an empty file is added to the prototype if the %ghost file
	     does not exist in $RPM_BUILD_ROOT
	  Slight change in the way %config and %class files work:
	   - %config files that belong to class none are volatile
	   - %config files belong to other classes are editable
	   - non-%config files that belong to a %class are type 'f' in the
	     prototype
	* rpm_spec.pm.in: process %ghost files
	* rpm_file.pm: process %ghost files; add is_ghost()

2005-09-24  Laszlo Peter  <laca@sun.com>

	* configure.in: use gtar on Solaris

2005-09-19  Laszlo Peter  <laca@sun.com>

	* pkgbuild.spec.in: fix build on Linux

2005-08-25  Laszlo Peter  <laca@sun.com>

	* configure.in: bump to 0.10.0
	
	* tests/: add beginnings of an automated test suite

	* rpm_spec.pm.in: fix "cd" commands at the beginning of blocks
	  so they work properly in %use'd spec files.

2005-08-08  Laszlo Peter  <laca@sun.com>

	* configure.in: find GNU patch (gpatch on Solaris)
	
	* rpm_spec.pm.in: use GNU patch found in configure

	* pkgbuild.pm.in: new command line option: --pkgformat
	  valid arguments: datastream (or ds) or filesystem (fs);
	  implement creating datastream format packages
	
	* pkgtool.pl: script for building multiple modules from
	  spec files, tarballs and patches, copying sources/specs to the
	  right directories, etc.  See pkgtool --help for
	  more details.

	* pkgtool: wrapper script for pkgtool.pl

	* config.pm: simple config file parser module used by pkgtool.pl.
	
2005-07-25  Laszlo Peter  <laca@sun.com>

	* pkgbuild.pl.in: implemented --with foo / --without foo command
	  line parsing; the following sintaxes are valid:
	    --with foo
	    --with=foo
	    --with-foo

2005-06-13  Laszlo Peter  <laca@sun.com>

	* configure.in: version 0.9.1

	* rpm_spec.pm.in: implement %if <expression>

	* pkgbuild.pl.in: a baby step towards implementing %pre/post -p shell;
	  avoid running find / when buildroot is unset.

2005-01-25  Laszlo Peter  <laca@sun.com>

	* pkgbuild.pl.in: fix solaris release checking

	* rpm_spec.pm.in: fix solaris release checking

2004-12-22  Laszlo Peter  <laca@sun.com>

	Initial release on pkgbuild.sourceforge.net.  Old ChangeLog
	saved as ChangeLog.pre-sf.
